var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,k,e){c instanceof String&&(c=String(c));for(var f=c.length,h=0;h<f;h++){var q=c[h];if(k.call(e,q,h,c))return{i:h,v:q}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,k,e){c!=Array.prototype&&c!=Object.prototype&&(c[k]=e.value)};
$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(c,k,e,f){if(k){e=$jscomp.global;c=c.split(".");for(f=0;f<c.length-1;f++){var h=c[f];h in e||(e[h]={});e=e[h]}c=c[c.length-1];f=e[c];k=k(f);k!=f&&null!=k&&$jscomp.defineProperty(e,c,{configurable:!0,writable:!0,value:k})}};
$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,e){return $jscomp.findInternal(this,c,e).v}},"es6","es3");
sysPass.Actions=function(c){var k=0,e={entrypoint:"/index.php"};Object.freeze(e);var f=function(a,b){c.info("getContent");a.isAjax=1;a.sk=sysPassApp.sk.get();var d=sysPassApp.requests.getRequestOpts();d.method="get";d.type="html";d.addHistory=!0;d.url=sysPassApp.util.getUrl(e.entrypoint,a);return sysPassApp.requests.getActionCall(d,function(a){var d=$("#content");d.empty().html(a);a=sysPassApp.triggers.views;a.common(d);if(void 0!==b&&"function"===typeof a[b])a[b]();d=$(".mdl-layout__content");0<
d.scrollTop()&&d.animate({scrollTop:0},1E3)})},h=function(a,b){$.magnificPopup.open({items:{src:a||"",type:"inline"},callbacks:{open:function(){var a=$("#box-popup");sysPassApp.triggers.views.common(a);void 0!==b&&"function"===typeof b.open&&b.open()},close:function(){void 0!==b&&"function"===typeof b.close&&b.close()}},showCloseBtn:!1})},q=function(a,b){var d=$('<div id="box-popup" class="image">'+b+"</div>"),c=d.find("img");if(0===c.length)return h(b);c.hide();$.magnificPopup.open({items:{src:d,
type:"inline"},callbacks:{open:function(){var a=this;c.on("click",function(){a.close()});setTimeout(function(){var a=sysPassApp.util.resizeImage(c);d.css({backgroundColor:"#fff",width:a.width,height:"auto"});c.show("slow")},500)}}})},p=function(){$.magnificPopup.close()},m={view:function(a){c.info("account:show");f({r:[a.data("action-route"),a.data("item-id")]},"account")},viewHistory:function(a){c.info("account:showHistory");f({r:[a.data("action-route"),a.val()]},"account")},edit:function(a){c.info("account:edit");
f({r:[a.data("action-route"),a.data("item-id")]},"account")},delete:function(a){c.info("account:delete");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[3]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(d){d=sysPassApp.requests.getRequestOpts();d.url=e.entrypoint;d.data={r:"account/saveDelete/"+a.data("item-id"),
sk:sysPassApp.sk.get()};sysPassApp.requests.getActionCall(d,function(d){sysPassApp.msg.out(d);sysPassApp.sk.set(d.csrf);m.search(a)})}}})},viewPass:function(a){c.info("account:viewPass");var b=a.data("parent-id")||0,d=0===b?a.data("item-id"):b,n=sysPassApp.requests.getRequestOpts();n.method="get";n.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),d,b],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(n,function(a){0!==a.status?sysPassApp.msg.out(a):(a=$(a.data.html),
h(a),k=setTimeout(function(){p()},3E4),a.on("mouseleave",function(){clearTimeout(k);k=setTimeout(function(){p()},3E4)}).on("mouseenter",function(){0!==k&&clearTimeout(k)}))})},viewPassHistory:function(a){c.info("account:viewPassHistory");m.viewPass(a)},copyPass:function(a){c.info("account:copyPass");var b=a.data("parent-id");b=0===b?a.data("item-id"):b;var d=sysPassApp.requests.getRequestOpts();d.method="get";d.async=!1;d.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),b],sk:sysPassApp.sk.get(),
isAjax:1});return sysPassApp.requests.getActionCall(d)},copyPassHistory:function(a){c.info("account:copyPassHistory");m.copyPassHistory(a)},copy:function(a){c.info("account:copy");f({r:[a.data("action-route"),a.data("item-id")]},"account")},saveFavorite:function(a,b){c.info("account:saveFavorite");var d="on"===a.data("status"),n=d?a.data("action-route-off"):a.data("action-route-on"),u=sysPassApp.requests.getRequestOpts();u.url=e.entrypoint;u.data={r:n+"/"+a.data("item-id"),sk:sysPassApp.sk.get(),
isAjax:1};sysPassApp.requests.getActionCall(u,function(c){sysPassApp.msg.out(c);0===c.status&&(a.data("status",d?"off":"on"),"function"===typeof b&&b())})},request:function(a){c.info("account:request");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"?r="+a.data("action-route")+"/"+a.data("item-id");b.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&void 0!==a.data.nextAction&&(sysPassApp.sk.set(a.csrf),
f({r:a.data.nextAction},"account"))})},menu:function(a){a.hide();a.parent().children(".actions-optional").show(250)},sort:function(a){c.info("account:sort");var b=$("#frmSearch");b.find('input[name="skey"]').val(a.data("key"));b.find('input[name="sorder"]').val(a.data("dir"));b.find('input[name="start"]').val(a.data("start"));m.search()},editPass:function(a){c.info("account:editpass");var b=a.data("parent-id");b=void 0===b?a.data("item-id"):b;f({r:[a.data("action-route"),b]},"account")},saveEditRestore:function(a){c.info("account:restore");
var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint;b.data={r:a.data("action-route")+"/"+a.data("history-id")+"/"+a.data("item-id"),sk:sysPassApp.sk.get()};sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);void 0!==a.data.itemId&&void 0!==a.data.nextAction&&f({r:[a.data.nextAction,a.data.itemId]},"account")})},listFiles:function(a){c.info("account:getfiles");var b=sysPassApp.requests.getRequestOpts();b.method="get";b.type="html";b.url=sysPassApp.util.getUrl(e.entrypoint,
{r:[a.data("action-route"),a.data("item-id")],del:a.data("delete"),sk:sysPassApp.sk.get()});sysPassApp.requests.getActionCall(b,function(b){a.html(b)})},search:function(a){c.info("account:search");var b=$("#frmSearch");b.find("input[name='sk']").val(sysPassApp.sk.get());b.find("input[name='skey']").val();b.find("input[name='sorder']").val();void 0!==a&&b.find("input[name='start']").val(0);a=sysPassApp.requests.getRequestOpts();a.method="get";a.url=sysPassApp.util.getUrl(e.entrypoint,{r:b.data("action-route")});
a.data=b.serialize();sysPassApp.requests.getActionCall(a,function(a){10===a.status&&sysPassApp.msg.out(a);$("#res-content").empty().html(a.data.html)})},save:function(a){c.info("account:save");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"?r="+a.data("action-route")+"/"+a.data("item-id");b.data=a.serialize();$("select.select-box-tags[data-hash][data-updated=true]").each(function(a,c){b.data+="&"+c.getAttribute("id")+"_update=1"});sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);
void 0!==a.data.itemId&&void 0!==a.data.nextAction&&f({r:[a.data.nextAction,a.data.itemId]},"account")})}},w={logout:function(){sysPassApp.util.redirect("index.php?r=login/logout")},login:function(a){c.info("main:login");var b=sysPassApp.requests.getRequestOpts();b.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("route")});b.data=a.serialize();sysPassApp.requests.getActionCall(b,function(b){var d=$(".extra-hidden");switch(b.status){case 0:sysPassApp.util.redirect(b.data.url);break;case 2:sysPassApp.msg.out(b);
a.find("input[type='text'],input[type='password']").val("");0<d.length&&d.hide();$("#mpass").prop("disabled",!1).val("");$("#smpass").show();break;case 5:sysPassApp.msg.out(b);a.find("input[type='text'],input[type='password']").val("");0<d.length&&d.hide();$("#oldpass").prop("disabled",!1).val("");$("#soldpass").show();break;default:sysPassApp.msg.out(b),a.find("input[type='text'],input[type='password']").val("")}})},install:function(a){c.info("main:install");var b=sysPassApp.requests.getRequestOpts();
b.url=e.entrypoint+"?r="+a.data("route");b.data=a.serialize();sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&setTimeout(function(){sysPassApp.util.redirect("index.php?r=login/index")},1E3)})},upgrade:function(a){c.info("main:upgrade");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[59]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},
positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b=a.find("input[name='taskId']").val();var d=sysPassApp.requests.getRequestOpts();b&&(d.useFullLoading=!0,r.run(b));d.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("action-route")});d.method="get";d.data=a.serialize();sysPassApp.requests.getActionCall(d,function(b){sysPassApp.msg.out(b);0!==b.status?a.find(":input[name=key]").val(""):(r.end(),setTimeout(function(){sysPassApp.util.redirect("index.php")},5E3))})}}})},getUpdates:function(){c.info("main:getUpdates");
var a=sysPassApp.requests.getRequestOpts();a.method="get";a.url=sysPassApp.util.getUrl(e.entrypoint,{r:"status/checkRelease",isAjax:1});a.timeout=1E4;a.useLoading=!1;var b=$("#updates");sysPassApp.requests.getActionCall(a,function(a){0===a.status?0<a.data.length?b.html('<a id="link-updates" href="'+a.data.url+'" target="_blank">'+a.data.title+'\n                            <div id="help-hasupdates" class="icon material-icons mdl-color-text--indigo-200">cloud_download</div>\n                            </a>\n                            <span for="link-updates" class="mdl-tooltip mdl-tooltip--top mdl-tooltip--large">'+
a.data.description+"</span>"):b.html('<div id="updates-info" class="icon material-icons mdl-color-text--teal-200">check_circle</div>\n                            <span for="updates-info" class="mdl-tooltip mdl-tooltip--top mdl-tooltip--large">'+sysPassApp.config.LANG[68]+"</span>"):b.html('<div id="updates-info" class="icon material-icons mdl-color-text--amber-200">warning</div>\n                        <span for="updates-info" class="mdl-tooltip mdl-tooltip--top mdl-tooltip--large">'+sysPassApp.config.LANG[69]+
"</span>");sysPassApp.theme.update()},function(){b.html('<div id="updates-info" class="icon material-icons mdl-color-text--amber-200">warning</div>\n                    <span for="updates-info" class="mdl-tooltip mdl-tooltip--top mdl-tooltip--large">'+sysPassApp.config.LANG[69]+"</span>")})},getNotices:function(){c.info("main:getNotices");var a=sysPassApp.requests.getRequestOpts();a.method="get";a.url=sysPassApp.util.getUrl(e.entrypoint,{r:"status/checkNotices",isAjax:1});a.timeout=1E4;a.useLoading=
!1;a.data={isAjax:1};var b=$("#notices");sysPassApp.requests.getActionCall(a,function(a){0===a.status&&0<a.data.length&&b.html('<a href="https://github.com/nuxsmin/sysPass/labels/Notices" target="_blank">\n                            <div id="notices-info" \n                            class="material-icons mdl-badge mdl-badge--overlap mdl-color-text--amber-200" \n                            data-badge="'+a.data.length+'">feedback</div>\n                            </a>\n                            <span for="notices-info" class="mdl-tooltip mdl-tooltip--top mdl-tooltip--large">\n                            <div class="notices-title">'+
sysPassApp.config.LANG[70]+"</div>"+a.data.map(function(a){return a.title}).join("<br>")+"\n                            </span>");sysPassApp.theme.update()})}},g={state:{tab:{index:0,refresh:!0,route:""},itemId:0,update:function(a){var b=$("#content").find("[id^='tabs-'].is-active");0<b.length&&(g.state.tab.refresh=!a.data("item-dst"),g.state.tab.index=b.data("tab-index"),g.state.tab.route=b.data("tab-route"),g.state.itemId=a.data("item-id"))}},save:function(a,b){c.info("tabs:save");g.state.update(a);
var d=sysPassApp.requests.getRequestOpts();d.url=e.entrypoint+"?r="+a.data("action-route");d.method=a.data("action-method")||"post";d.data=a.serialize();d.data+="&sk="+sysPassApp.sk.get();$("select.select-box-tags[data-hash][data-updated=true]").each(function(a,b){d.data+="&"+b.getAttribute("id")+"_update=1"});sysPassApp.requests.getActionCall(d,function(d){sysPassApp.msg.out(d);0===d.status&&("function"===typeof b&&b(),void 0!==a.data("reload")?(c.info("reload"),setTimeout(function(){sysPassApp.util.redirect("index.php")},
2E3)):!0===g.state.tab.refresh&&(c.info("refresh"),f({r:g.state.tab.route,tabIndex:g.state.tab.index})))})},refresh:function(a){this.state.update(a);f({r:this.state.tab.route,tabIndex:this.state.tab.index})}},v={show:function(a){c.info("appMgmt:show");g.state.update(a);var b=sysPassApp.requests.getRequestOpts();b.method="get";var d=l.getSelection(a);!1!==d&&(b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),0===d.length?a.data("item-id"):null],sk:sysPassApp.sk.get(),isAjax:1}),
b.data={items:d},sysPassApp.requests.getActionCall(b,function(b){if(0!==b.status)sysPassApp.msg.out(b);else{var d=a.data("item-dst");h(b.data.html,{open:function(){d&&(g.state.tab.refresh=!1)},close:function(){d&&sysPassApp.actions.items.update(a)}})}}))},delete:function(a){c.info("appMgmt:delete");g.state.update(a);l.delete(a,function(b){var d=sysPassApp.requests.getRequestOpts();d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),0===b.length?a.data("item-id"):null],
sk:sysPassApp.sk.get(),isAjax:1});d.data={items:b};sysPassApp.requests.getActionCall(d,function(a){sysPassApp.msg.out(a);f({r:g.state.tab.route,tabIndex:g.state.tab.index})})})},save:function(a){c.info("appMgmt:save");g.save(a,function(){p()})},search:function(a){c.info("appMgmt:search");l.search(a)},nav:function(a){c.info("appMgmt:nav");l.nav(a)}},t={check:function(a){c.info("notification:check");var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,
{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(b){0===b.status&&f({r:a.data("action-next")});t.getActive()})},search:function(a){c.info("notification:search");l.search(a)},show:function(a){c.info("notification:show");v.show(a)},save:function(a){c.info("notification:save");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"?r="+a.data("route");b.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,
function(b){sysPassApp.msg.out(b);0===b.status&&($.magnificPopup.close(),f({r:a.data("action-next")}).then(function(){t.getActive()}))})},delete:function(a){c.info("notification:delete");l.delete(a,function(b){var d=sysPassApp.requests.getRequestOpts();d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),0===b.length?a.data("item-id"):null],sk:sysPassApp.sk.get(),isAjax:1});d.data={items:b};sysPassApp.requests.getActionCall(d,function(b){sysPassApp.msg.out(b);f({r:a.data("action-next")}).then(function(){t.getActive()})})})},
getActive:function(){c.info("notification:getActive");var a=sysPassApp.requests.getRequestOpts();a.method="get";a.useLoading=!1;a.url=sysPassApp.util.getUrl(e.entrypoint,{r:"items/notifications",sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(a,function(a){var b=$(".notifications-badge"),c=$(".notifications-tooltip");b.each(function(){var b=$(this);b.attr("data-badge",a.data.count);0===a.data.count?(b.removeClass(b.data("color-class")),c.empty().html(a.data.message)):(b.addClass(b.data("color-class")),
c.empty().html(a.data.message_has))});0<a.data.count&&sysPassApp.util.sendNotification(a.data.message_has,a.data.notifications.join("\n"),a.data.hash)})},nav:function(a){c.info("eventlog:nav");l.nav(a)}},l={search:function(a){c.info("grid:search");var b=$(a.data("target")),d=sysPassApp.requests.getRequestOpts();d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("action-route")});d.data=a.serialize();sysPassApp.requests.getActionCall(d,function(a){0===a.status?b.html(a.data.html):b.html(sysPassApp.msg.html.error(a.description));
sysPassApp.sk.set(a.csrf)})},nav:function(a,b){c.info("grid:nav");var d=$("#"+a.data("action-form"));d.find("[name='start']").val(a.data("start"));d.find("[name='count']").val(a.data("count"));d.find("[name='sk']").val(sysPassApp.sk.get());"function"===typeof b?b(d):l.search(d)},delete:function(a,b){var d='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[12]+"</p></div>",c=l.getSelection(a);!1!==c&&mdlDialog().show({text:d,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();
sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(a){a.preventDefault();"function"===typeof b&&b(c)}}})},getSelection:function(a){a=a.data("selection");var b=[];return a&&($(a).find(".is-selected").each(function(){b.push($(this).data("item-id"))}),0===b.length)?!1:b}},r={runner:null,run:function(a){c.info("task:run");c.info("taskId: "+a);var b=$("#taskStatus");b.css("display","block");b.empty().html(sysPassApp.config.LANG[62]);var d=sysPassApp.requests.getRequestOpts();
d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,{r:["task/trackStatus",a]});return this.runner=sysPassApp.requests.getActionEvent(d,function(a){a=a.task+" - "+a.message+" - "+a.time+" - "+a.progress+"%<br>"+sysPassApp.config.LANG[62];c.info(a);b.empty().html(a)})},end:function(){c.info("task:end");null!==this.runner&&(c.info("Task ended"),this.runner.close(),$("#taskStatus").css("display","none"))}};return{getContent:f,showFloatingBox:h,closeFloatingBox:p,appMgmt:v,account:m,accountManager:{restore:function(a){c.info("accountManager:restore");
g.state.update(a);var b=a.data("item-id"),d=sysPassApp.requests.getRequestOpts();d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(d,function(d){sysPassApp.msg.out(d);0===d.status&&((d=a.data("action-next"))?f({r:[d,b]}):f({r:g.state.tab.route,tabIndex:g.state.tab.index}))})}},file:{view:function(a){c.info("file:view");var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=
sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get()});sysPassApp.requests.getActionCall(b,function(b){if(0!==b.status)return sysPassApp.msg.out(b);q(a,b.data.html)})},download:function(a){c.info("file:download");var b=a.data("item-type");a=sysPassApp.requests.getUrl(sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get()}));"PDF"===b.toUpperCase()?(c.info("Opening PDF file in new window/tab"),window.open(a,
"_blank")):(c.info("Downloading file"),$.fileDownload(a,{httpMethod:"GET",successCallback:function(a){sysPassApp.msg.ok(sysPassApp.config.LANG[72])}}))},delete:function(a){c.info("file:delete");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[15]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b=
sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get()});sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&m.listFiles($("#list-account-files"))})}}})}},checks:{wiki:function(a){c.info("checks:wiki");a=$(a.data("src"));a.find("[name='sk']").val(sysPassApp.sk.get());var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint;b.data=a.serialize();sysPassApp.requests.getActionCall(b,
function(a){sysPassApp.msg.out(a);0===a.status&&$("#dokuWikiResCheck").html(a.data)})}},config:{save:function(a){c.info("config:save");g.save(a)},masterpass:function(a){c.info("config:masterpass");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[59]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(b){b.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44]);a.find(":input[type=password]").val("")}},positive:{title:sysPassApp.config.LANG[43],
onClick:function(b){b=a.find("input[name='taskId']").val();var d=sysPassApp.requests.getRequestOpts();b&&(d.useFullLoading=!0,r.run(b));d.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("action-route")});d.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(d,function(b){sysPassApp.msg.out(b);a.find(":input[type=password]").val("");r.end()})}}})},backup:function(a){c.info("config:backup");g.state.update(a);var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+
"?r="+a.data("action-route");b.useFullLoading=!0;b.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&f({r:g.state.tab.route,tabIndex:g.state.tab.index})})},export:function(a){c.info("config:export");g.save(a)},import:function(a){c.info("config:import");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"?r="+a.data("action-route");b.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,
function(a){sysPassApp.msg.out(a)})},refreshMpass:function(a){c.info("config:import");var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("action-route"),sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a)})},mailCheck:function(a){c.info("config:mailCheck");var b=$(a.data("src")),d=sysPassApp.requests.getRequestOpts();d.url=e.entrypoint+"?r="+a.data("action-route");d.data=b.serialize()+"&sk="+
sysPassApp.sk.get();sysPassApp.requests.getActionCall(d,function(a){sysPassApp.msg.out(a)})}},main:w,user:{showSettings:function(a){c.info("user:showSettings");f({r:a.data("action-route")},"userSettings")},saveSettings:function(a){c.info("user:saveSettings");g.save(a)},password:function(a){c.info("user:password");var b=sysPassApp.requests.getRequestOpts();b.type="html";b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});
sysPassApp.requests.getActionCall(b,function(a){0===a.length?w.logout():h(a)})},passreset:function(a){c.info("user:passreset");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"/?r="+a.data("action-route");b.data=a.serialize();sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&setTimeout(function(){sysPassApp.util.redirect("index.php")},2E3)})},savePassword:function(a){c.info("user:savepassword");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+
"?r="+a.data("action-route");b.method="post";b.data=a.serialize();b.data+="&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&(p(),"function"===typeof onSuccess&&onSuccess())})}},link:{save:function(a){c.info("link:save");var b=function(b){var d=a.data("account-id"),c=sysPassApp.requests.getRequestOpts();c.method="get";d?c.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),d,b],sk:sysPassApp.sk.get(),isAjax:1}):(c.url=sysPassApp.util.getUrl(e.entrypoint,
{r:a.data("action-route"),sk:sysPassApp.sk.get(),isAjax:1}),c.data=a.serialize());sysPassApp.requests.getActionCall(c,function(b){sysPassApp.msg.out(b);0===b.status&&f({r:[a.data("action-next"),d]})})},d='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[48]+"</p></div>";mdlDialog().show({text:d,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();b(0)}},positive:{title:sysPassApp.config.LANG[43],onClick:function(a){a.preventDefault();b(1)}}})},delete:function(a){c.info("link:delete");
var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[12]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b.preventDefault();b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,
function(b){sysPassApp.msg.out(b);0===b.status&&f({r:[a.data("action-next"),a.data("account-id")]})})}}})},refresh:function(a){c.info("link:refresh");g.state.update(a);var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(b){sysPassApp.msg.out(b);0===b.status&&((b=a.data("action-next"))?f({r:[b,a.data("account-id")]}):f({r:g.state.tab.route,
tabIndex:g.state.tab.index}))})}},eventlog:{clear:function(a){var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[20]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b.preventDefault();g.save(a)}}})},refresh:function(a){$("#"+a.data("action-form")).submit()}},ajaxUrl:e,plugin:{toggle:function(a){c.info("plugin:enable");
g.state.update(a);var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(a){sysPassApp.msg.out(a);0===a.status&&setTimeout(function(){sysPassApp.util.redirect("index.php")},2E3)})},reset:function(a){c.info("plugin:reset");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[58]+"</p></div>";mdlDialog().show({text:b,
negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b.preventDefault();b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(b){sysPassApp.msg.out(b);0===b.status&&f({r:a.data("action-next")})})}}})},
search:function(a){c.info("plugin:search");l.search(a)},show:function(a){c.info("plugin:show");v.show(a)},save:function(a){c.info("plugin:save");var b=sysPassApp.requests.getRequestOpts();b.url=e.entrypoint+"?r="+a.data("route");b.data=a.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(b,function(b){sysPassApp.msg.out(b);0===b.status&&(f({r:a.data("action-next")}),$.magnificPopup.close())})},nav:function(a){c.info("plugin:nav");l.nav(a)}},notification:t,wiki:{show:function(a){c.info("wiki:show");
var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("action-route"),pageName:a.data("pagename"),actionId:a.data("action-id"),sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(a){0!==a.status?sysPassApp.msg.out(a):h(a.data.html)})}},items:{get:function(a){c.info("items:get");var b=a[0].selectize;b.clearOptions();b.load(function(c){var d=sysPassApp.requests.getRequestOpts();d.method="get";d.url=sysPassApp.util.getUrl(e.entrypoint,
{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get()});sysPassApp.requests.getActionCall(d,function(d){c(d.data);b.setValue(a.data("selected-id"),!0);sysPassApp.triggers.updateFormHash()})})},update:function(a){c.info("items:update");var b=$("#"+a.data("item-dst"))[0].selectize,d=b.getValue();b.clearOptions();b.load(function(c){var f=sysPassApp.requests.getRequestOpts();f.method="get";f.url=sysPassApp.util.getUrl(e.entrypoint,{r:a.data("item-route"),sk:sysPassApp.sk.get()});sysPassApp.requests.getActionCall(f,
function(a){c(a);b.setValue(d,!0)})})}},ldap:{check:function(a){c.info("ldap:check");var b=$(a.data("src")),d=sysPassApp.requests.getRequestOpts();d.url=e.entrypoint+"?r="+a.data("action-route");d.data=b.serialize()+"&sk="+sysPassApp.sk.get();sysPassApp.requests.getActionCall(d,function(a){sysPassApp.msg.out(a);0===a.status&&void 0!==a.data.template&&void 0!==a.data.items&&h(a.data.template,{open:function(){var b=$("#ldap-results").find(".list-wrap").empty();a.data.items.forEach(function(a){b.append(sysPassApp.theme.html.getList(a.items,
a.icon))})}})})},import:function(a){c.info("ldap:import");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[57]+"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b=$(a.data("src"));var c=sysPassApp.requests.getRequestOpts();c.url=e.entrypoint+"?r="+a.data("action-route");c.data=b.serialize()+"&sk="+
sysPassApp.sk.get();sysPassApp.requests.getActionCall(c,function(a){sysPassApp.msg.out(a)})}}})}},track:{unlock:function(a){c.info("track:unlock");var b=sysPassApp.requests.getRequestOpts();b.method="get";b.url=sysPassApp.util.getUrl(e.entrypoint,{r:[a.data("action-route"),a.data("item-id")],sk:sysPassApp.sk.get(),isAjax:1});sysPassApp.requests.getActionCall(b,function(b){sysPassApp.msg.out(b);g.refresh(a)})},clear:function(a){c.info("track:clear");var b='<div id="alert"><p id="alert-text">'+sysPassApp.config.LANG[71]+
"</p></div>";mdlDialog().show({text:b,negative:{title:sysPassApp.config.LANG[44],onClick:function(a){a.preventDefault();sysPassApp.msg.error(sysPassApp.config.LANG[44])}},positive:{title:sysPassApp.config.LANG[43],onClick:function(b){b.preventDefault();g.save(a)}}})},refresh:function(a){$("#"+a.data("action-form")).submit()}}}};
