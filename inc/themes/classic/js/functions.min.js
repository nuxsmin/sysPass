sysPass.Util.Theme=function(){var f=new sysPass.Util.Common(),g=f.passwordData,e=f.APP_ROOT,a=f.LANG,j=f.PK;var c=function(){if(document.getElementById("wrap-loading")!==null){$("#wrap-loading").show();$("#loading").addClass("is-active")}else{$.fancybox.showLoading()}};var k=function(){if(document.getElementById("wrap-loading")!==null){$("#wrap-loading").hide();$("#loading").removeClass("is-active")}else{$.fancybox.hideLoading()}};var h=function(){$(".active-tooltip").tooltip({content:function(){return $(this).attr("title")},tooltipClass:"tooltip"});$(".help-tooltip").tooltip({content:function(){return $(this).next("div").html()},tooltipClass:"tooltip"})};var i=function(r,o,l,n){var q=0,m="",p;while(q<g.complexity.numlength){p=(Math.floor((Math.random()*100))%94)+33;if(!g.complexity.symbols){if((p>=33)&&(p<=47)){continue}if((p>=58)&&(p<=64)){continue}if((p>=91)&&(p<=96)){continue}if((p>=123)&&(p<=126)){continue}}if(!g.complexity.numbers&&p>=48&&p<=57){continue}if(!g.complexity.uppercase&&p>=65&&p<=90){continue}q++;m+=String.fromCharCode(p)}if(l===true){$("#viewPass").attr("title",m)}else{alertify.alert('<div id="alert"><p id="alert-text">'+a[6]+'</p><p id="alert-pass"> '+m+"</p>")}var s=zxcvbn(m);g.passLength=m.length;if(n){f.outputResult(s.score,n);$("#"+n).val(m);$("#"+n+"R").val(m);sysPassUtil.Common.encryptFormValue("#"+n+"R")}else{f.outputResult(s.score,n);$("input:password, input.password").val(m);$("#passLevel").show(500)}};var b=function(){$('<div id="dialog-complexity"></div>').dialog({modal:true,title:a[29],width:"450px",open:function(){var l=$(this);var m='<div class="dialog-btns-complexity"><label for="checkbox-numbers">'+a[35]+'</label><input type="checkbox" id="checkbox-numbers" name="checkbox-numbers"/><label for="checkbox-uppercase">'+a[36]+'</label><input type="checkbox" id="checkbox-uppercase" name="checkbox-uppercase"/><label for="checkbox-symbols">'+a[37]+'</label><input type="checkbox" id="checkbox-symbols" name="checkbox-symbols"/></div><div class="dialog-length-complexity"><label for="passlength">'+a[38]+'</label><input class="inputNumber" pattern="[0-9]*" id="passlength" /></div><div class="dialog-buttons"><button class="btnDialogOk">Ok</button></div>';l.html(m);l.dialog("option","position","center");l.ready(function(){$("#checkbox-numbers").prop("checked",g.complexity.numbers);$("#checkbox-uppercase").prop("checked",g.complexity.uppercase);$("#checkbox-symbols").prop("checked",g.complexity.symbols);$("#passlength").val(g.complexity.numlength);$(".dialog-btns-complexity").buttonset({icons:{primary:"ui-icon-transferthick-e-w"}});$(".inputNumber").spinner();$(".btnDialogOk").button().click(function(){g.complexity.numbers=$(" #checkbox-numbers").is(":checked");g.complexity.uppercase=$("#checkbox-uppercase").is(":checked");g.complexity.symbols=$("#checkbox-symbols").is(":checked");g.complexity.numlength=parseInt($("#passlength").val());l.dialog("close")})})},close:function(){$(this).dialog("destroy")}})};var d=function(){$(".passwordfield__input").each(function(){var n=$(this);var l=$(this).attr("id");if(n.next().hasClass("password-actions")){return}var m='<div><button type="button" class="quickGenPass" data-targetid="'+l+'">'+a[28]+"</button>";m+='<button type="button" class="genPassActions">'+a[27]+"</button></div>";m+="<ul>";m+='<li data-targetid="'+l+'" class="passGen">'+a[28]+"</li>";m+='<li data-targetid="'+l+'" class="passComplexity">'+a[29]+"</li>";m+='<li data-targetid="'+l+'" class="reset">'+a[30]+"</li>";m+="</ul>";n.after('<div class="password-actions" />');n.next(".password-actions").prepend(m).prepend('<img class="showpass inputImg" src="imgs/show.png" title="'+a[32]+'" data-targetid="'+l+'" />').prepend('<span class="passLevel passLevel-'+l+' fullround" title="'+a[31]+'"></span>');$(".quickGenPass").button({text:false,icons:{primary:"ui-icon-gear"}}).click(function(){i(11,true,true,l)}).next().button({text:false,icons:{primary:"ui-icon-key"}}).click(function(){var o=$(this).parent().next().show().position({my:"left top",at:"left bottom",of:this});$(document).one("click",function(){o.hide()});return false}).parent().buttonset().next().hide().menu();$(this).on("keyup",function(){f.checkPassLevel($(this).val(),l)})});$(".passwordfield__input-show").each(function(){var m=$(this);var l=$(this).attr("id");m.after('<img class="showpass inputImg" src="imgs/show.png" title="'+a[32]+'" data-targetid="'+l+'" />')});$(".passGen").each(function(){$(this).on("click",function(){var l=$(this).data("targetid");i(11,true,true,l);$("#"+l).focus()})});$(".passComplexity").each(function(){$(this).on("click",function(){b()})});$(".showpass").each(function(){$(this).on("mouseover",function(){var l=$(this).data("targetid");$(this).attr("title",$("#"+l).val())})});$(".reset").each(function(){$(this).on("click",function(){var l=$(this).data("targetid");$("#"+l).val("");$("#"+l+"R").val("")})})};return{showLoading:c,hideLoading:k,activeTooltip:h,passwordDetect:d,password:i,init:function(){jQuery.extend(jQuery.fancybox.defaults,{type:"ajax",autoWidth:true,autoHeight:true,autoResize:true,autoCenter:true,fitToView:false,minHeight:50,padding:0,helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.1)"}}},keys:{close:[27]},afterShow:function(){$("#fancyContainer").find("input:visible:first").focus()}});jQuery.ajaxSetup({beforeSend:function(){c()},complete:function(){k();f.setContentSize();h()}});$(document).ready(function(){f.setContentSize();h()})},Common:f}};var sysPassUtil=new sysPass.Util.Theme();sysPassUtil.init();