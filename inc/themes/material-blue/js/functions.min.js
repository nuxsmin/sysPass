sysPass.Util.Theme=function(){var f=new sysPass.Util.Common(),g=f.passwordData,e=f.APP_ROOT,a=f.LANG,j=f.PK;var c=function(){$("#wrap-loading").show();$("#loading").addClass("is-active")};var k=function(){$("#wrap-loading").hide();$("#loading").removeClass("is-active")};var h=function(){$(".active-tooltip").tooltip({content:function(){return $(this).attr("title")},tooltipClass:"tooltip"})};var i=function(n,s,l,u){var p=0,t="",r;while(p<g.complexity.numlength){r=(Math.floor((Math.random()*100))%94)+33;if(!g.complexity.symbols){if((r>=33)&&(r<=47)){continue}if((r>=58)&&(r<=64)){continue}if((r>=91)&&(r<=96)){continue}if((r>=123)&&(r<=126)){continue}}if(!g.complexity.numbers&&r>=48&&r<=57){continue}if(!g.complexity.uppercase&&r>=65&&r<=90){continue}p++;t+=String.fromCharCode(r)}if(l===true){$("#viewPass").attr("title",t)}else{alertify.alert('<div id="alert"><p id="alert-text">'+a[6]+'</p><p id="alert-pass"> '+t+"</p>")}var m=zxcvbn(t);g.passLength=t.length;if(u){var q=$("#"+u).parent();f.outputResult(m.score,u);var o=new MaterialTextfield();q.find("input:password").val(t);q.addClass(o.CssClasses_.IS_DIRTY).removeClass(o.CssClasses_.IS_INVALID);$("#"+u+"R").val(t).parent().addClass(o.CssClasses_.IS_DIRTY).removeClass(o.CssClasses_.IS_INVALID);sysPassUtil.Common.encryptFormValue("#"+u+"R");q.find("#passLevel").show(500)}else{f.outputResult(m.score);$("input:password, input.password").val(t);$("#passLevel").show(500)}};var b=function(){$("<div></div>").dialog({modal:true,title:a[29],width:"400px",open:function(){var l=$(this);var m='<label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-numbers"><input type="checkbox" id="checkbox-numbers" class="mdl-checkbox__input" name="checkbox-numbers"/><span class="mdl-checkbox__label">'+a[35]+'</span></label><label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-uppercase"><input type="checkbox" id="checkbox-uppercase" class="mdl-checkbox__input" name="checkbox-uppercase"/><span class="mdl-checkbox__label">'+a[36]+'</span></label><label class="mdl-checkbox mdl-js-checkbox mdl-js-ripple-effect" for="checkbox-symbols"><input type="checkbox" id="checkbox-symbols" class="mdl-checkbox__input" name="checkbox-symbols"/><span class="mdl-checkbox__label">'+a[37]+'</span></label><div class="mdl-textfield mdl-js-textfield textfield-passlength"><input class="mdl-textfield__input" type="number" pattern="[0-9]*" id="passlength" /><label class="mdl-textfield__label" for="passlength">'+a[38]+'</label></div><button id="btn-complexity" class="mdl-button mdl-js-button mdl-button--raised">Ok</button>';l.html(m);l.dialog("option","position","center");l.ready(function(){$("#checkbox-numbers").prop("checked",g.complexity.numbers);$("#checkbox-uppercase").prop("checked",g.complexity.uppercase);$("#checkbox-symbols").prop("checked",g.complexity.symbols);$("#passlength").val(g.complexity.numlength);$("#btn-complexity").click(function(){g.complexity.numbers=$(" #checkbox-numbers").is(":checked");g.complexity.uppercase=$("#checkbox-uppercase").is(":checked");g.complexity.symbols=$("#checkbox-symbols").is(":checked");g.complexity.numlength=parseInt($("#passlength").val());l.dialog("close")});componentHandler.upgradeDom()})},close:function(){$(this).dialog("destroy")}})};var d=function(){$(".passwordfield__input").each(function(){var m=$(this).parent();var l=$(this).attr("id");if(m.next().hasClass("password-actions")){return}var n='<button id="menu-speed-'+l+'" class="mdl-button mdl-js-button mdl-button--icon" type="button" title="'+a[27]+'"><i class="material-icons">more_vert</i></button>';n+='<ul class="mdl-menu mdl-js-menu" for="menu-speed-'+l+'">';n+='<li class="mdl-menu__item passGen" data-targetid="'+l+'"><i class="material-icons">settings</i>'+a[28]+"</li>";n+='<li class="mdl-menu__item passComplexity" data-targetid="'+l+'"><i class="material-icons">vpn_key</i>'+a[29]+"</li>";n+='<li class="mdl-menu__item reset" data-targetid="'+l+'"><i class="material-icons">refresh</i>'+a[30]+"</li>";m.after('<div class="password-actions" />');m.next(".password-actions").prepend('<span class="passLevel passLevel-'+l+' fullround" title="'+a[31]+'"></span>').prepend('<i class="showpass material-icons" title="'+a[32]+'" data-targetid="'+l+'">remove_red_eye</i>').prepend(n);$(this).on("keyup",function(){f.checkPassLevel($(this).val(),l)})});$(".passwordfield__input-show").each(function(){var m=$(this).parent();var l=$(this).attr("id");m.after('<i class="showpass material-icons" title="'+a[32]+'" data-targetid="'+l+'">remove_red_eye</i>')});$(".passGen").each(function(){$(this).on("click",function(){var l=$(this).data("targetid");i(11,true,true,l);$("#"+l).focus()})});$(".passComplexity").each(function(){$(this).on("click",function(){b()})});$(".showpass").each(function(){$(this).on("mouseover",function(){var l=$(this).data("targetid");$(this).attr("title",$("#"+l).val())})});$(".reset").each(function(){$(this).on("click",function(){var l=$(this).data("targetid");$("#"+l).val("");$("#"+l+"R").val("");componentHandler.upgradeDom()})})};return{showLoading:c,hideLoading:k,activeTooltip:h,passwordDetect:d,password:i,init:function(){jQuery.extend(jQuery.fancybox.defaults,{type:"ajax",autoWidth:true,autoHeight:true,autoResize:true,autoCenter:true,fitToView:false,minHeight:50,padding:0,helpers:{overlay:{css:{background:"rgba(0, 0, 0, 0.1)"}}},keys:{close:[27]},afterShow:function(){$("#fancyContainer").find("input:visible:first").focus()}});jQuery.ajaxSetup({beforeSend:function(){c()},complete:function(){k();componentHandler.upgradeDom();f.scrollUp();h()}});$(document).ready(function(){h()})},Common:f}};var sysPassUtil=new sysPass.Util.Theme();sysPassUtil.init();